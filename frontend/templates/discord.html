<section id="discordPanel" class="discord-panel hidden" aria-labelledby="discordPanelTitle">
  <div class="section-head">
    <div>
      <h2 id="discordPanelTitle">Discord</h2>
      <p class="muted">
        Configure the global Main Bot for shared automation and learn where to manage each workspace's Server Bot.
      </p>
    </div>
  </div>
  <section id="teamDiscordSection" class="team-section" aria-labelledby="teamDiscordTitle">
    <div class="team-section-head">
      <h4 id="teamDiscordTitle">Discord integration</h4>
      <p class="muted small">Configure the Main Bot, authentication rules, ticketing, and command permissions without endless scrolling.</p>
    </div>
    <div class="discord-tab-nav" role="tablist" aria-label="Discord settings tabs">
      <button type="button" class="discord-tab-button active" data-discord-tab="overview" aria-controls="discordTabOverview" aria-selected="true" role="tab">Overview</button>
      <button type="button" class="discord-tab-button" data-discord-tab="auth" aria-controls="discordTabAuth" aria-selected="false" role="tab">Authentication</button>
      <button type="button" class="discord-tab-button" data-discord-tab="ticket" aria-controls="discordTabTicket" aria-selected="false" role="tab">Ticketing</button>
      <button type="button" class="discord-tab-button" data-discord-tab="monitoring" aria-controls="discordTabMonitoring" aria-selected="false" role="tab">Status &amp; Lookup</button>
    </div>
    <div class="discord-tab-panels">
      <div class="discord-tab-panel active" id="discordTabOverview" data-discord-panel="overview" role="tabpanel" aria-labelledby="teamDiscordTitle">
    <div class="discord-card-grid discord-card-grid--even">
      <form id="teamDiscordForm" class="team-discord-form discord-card" autocomplete="off">
        <span class="discord-chip" aria-hidden="true">Main Bot</span>
        <h5>Connect guild and bot token</h5>
        <div class="discord-form-card" id="teamDiscordCard">
          <label for="teamDiscordGuildId">Guild ID
            <input
              type="text"
              id="teamDiscordGuildId"
              name="teamDiscordGuildId"
              inputmode="numeric"
              autocomplete="off"
              autocapitalize="none"
              spellcheck="false"
              placeholder="Enter Discord guild ID"
            />
          </label>
          <label for="teamDiscordToken">Bot token
            <input
              type="password"
              id="teamDiscordToken"
              name="teamDiscordToken"
              autocomplete="new-password"
              autocapitalize="none"
              spellcheck="false"
              placeholder="Paste Discord bot token"
            />
          </label>
        </div>
        <div class="row align-start">
          <button type="submit" class="accent" id="btnSaveTeamDiscord">Save settings</button>
          <button type="button" class="ghost danger" id="btnRemoveTeamDiscord">Remove settings</button>
          <p id="teamDiscordStatus" class="notice hidden inline-notice" role="status" aria-live="polite"></p>
        </div>
        <div class="row wrap">
          <button type="button" class="ghost" id="btnRefreshTeamDiscordChannelsOverview">Refresh channels</button>
          <button type="button" class="ghost" id="btnRefreshTeamDiscordRolesOverview">Refresh roles</button>
          <button type="button" class="ghost" id="btnRefreshTeamDiscordCategoriesOverview">Refresh categories</button>
        </div>
      </form>
          <aside class="discord-card discord-summary-card small" aria-labelledby="teamDiscordSummaryTitle">
            <div class="discord-chip" aria-hidden="true">Overview</div>
            <h5 id="teamDiscordSummaryTitle">Current link</h5>
            <dl id="teamDiscordSummary" class="discord-summary-list">
              <div>
                <dt>Guild ID</dt>
                <dd id="teamDiscordSummaryGuild">Not set</dd>
              </div>
              <div>
                <dt>Bot token</dt>
                <dd id="teamDiscordSummaryToken">Not linked</dd>
              </div>
            </dl>
            <p id="teamDiscordHelp" class="muted small">
              The stored token stays hidden. Paste a new value to replace the existing one.
            </p>
            <p class="muted small">
              Each workspace has its own Server Bot token and guild ID for appearance and embed styling. You can only edit this workspace's bot configuration.
            </p>
          </aside>
        </div>
      </div>
      <section
        id="teamAuthSection"
        class="team-discord-auth discord-card discord-section-card discord-tab-panel"
        data-discord-panel="auth"
        role="tabpanel"
        aria-labelledby="teamAuthTitle"
      >
        <div class="discord-card-header">
          <div>
            <span class="discord-chip" aria-hidden="true">Auth &amp; roles</span>
            <h4 id="teamAuthTitle">Discord authentication</h4>
            <p class="muted small">Require players to link Discord so they can receive the configured role after authenticating.</p>
          </div>
          <div class="discord-meta">
            <span class="meta-label">Mode</span>
            <span class="meta-value" id="teamAuthMode">Main Bot</span>
          </div>
        </div>
        <form id="teamAuthForm" class="team-discord-form" autocomplete="off">
          <div class="discord-form-card" id="teamAuthCard">
            <label class="checkbox">
              <input type="checkbox" id="teamAuthEnabled" />
              <span>Require Discord authentication</span>
            </label>
            <div class="discord-field-grid">
              <label for="teamAuthRole">Auto-assign role ID
                  <div class="input-combo">
                    <select id="teamAuthRoleSelect" class="input-combo-select">
                      <option value="">Select a role</option>
                    </select>
                    <input
                      id="teamAuthRole"
                      type="text"
                      inputmode="numeric"
                      autocomplete="off"
                      placeholder="Optional: paste a Discord role ID"
                    />
                  </div>
                <small class="muted">Pick a Discord role from the dropdown or paste an ID manually.</small>
              </label>
              <label for="teamAuthLogChannel">Log channel ID
                  <div class="input-combo">
                    <select id="teamAuthLogChannelSelect" class="input-combo-select">
                      <option value="">Select a channel</option>
                    </select>
                    <input
                      id="teamAuthLogChannel"
                      type="text"
                      inputmode="numeric"
                      autocomplete="off"
                      placeholder="Optional: paste a Discord channel ID"
                    />
                  </div>
                </label>
            </div>
            <p class="muted small">When set, completed links are announced in the selected Discord channel.</p>
          </div>
          <div class="row align-start">
            <button type="submit" class="accent" id="teamAuthSave">Save authentication settings</button>
            <p id="teamAuthStatus" class="notice hidden inline-notice" role="status" aria-live="polite"></p>
          </div>
          <div class="command-roles-panel" data-command-section="auth">
            <div class="discord-section-note">
              <h5>Authentication command access</h5>
              <p class="muted small">Keep sensitive /auth subcommands limited to trusted roles.</p>
            </div>
            <div class="discord-command-entry-list two-column" data-command-list="auth"></div>
            <div class="row">
              <button type="button" class="accent" data-command-save="auth">Save authentication command roles</button>
            </div>
            <p class="notice hidden" data-command-status="auth"></p>
          </div>
      </form>
    </section>
      <section
        id="teamTicketingSection"
        class="team-discord-auth discord-card discord-section-card discord-tab-panel"
        data-discord-panel="ticket"
        role="tabpanel"
        aria-labelledby="teamTicketingMeta"
      >
        <div class="discord-card-header">
          <div>
            <span class="discord-chip" aria-hidden="true">Tickets</span>
            <h4>Ticketing and commands</h4>
            <p class="muted small">Manage support tickets and slash command roles for the Main Bot.</p>
          </div>
          <div class="discord-meta">
            <span class="meta-label">Visibility</span>
            <span class="meta-value" id="teamTicketingMeta">Workspace</span>
          </div>
        </div>
        <div class="discord-section-note">
          <h5>Current ticketing setup</h5>
          <p class="muted small">Review the live configuration before making changes.</p>
        </div>
        <div class="discord-summary-banner">
          <div>
            <p class="muted tiny">Status</p>
            <p class="summary-value" id="discord-ticketing-summary-status">—</p>
          </div>
          <div>
            <p class="muted tiny">Ticket category</p>
            <p class="summary-value" id="discord-ticketing-summary-category">—</p>
          </div>
          <div>
            <p class="muted tiny">Log channel</p>
            <p class="summary-value" id="discord-ticketing-summary-log">—</p>
          </div>
          <div>
            <p class="muted tiny">Staff role</p>
            <p class="summary-value" id="discord-ticketing-summary-role">—</p>
          </div>
        </div>
        <form id="teamTicketingForm" class="team-discord-form" autocomplete="off">
          <div class="discord-form-card" id="teamTicketingCard">
            <label class="checkbox">
              <input type="checkbox" id="discord-ticketing-enabled" />
              <span>Enable ticketing on the Main Bot</span>
            </label>
            <div class="discord-field-grid">
              <label for="discord-ticketing-category">Ticket category ID
                <div class="input-combo">
                  <select id="discord-ticketing-category-select" class="input-combo-select">
                    <option value="">Select a category</option>
                  </select>
                  <input
                    id="discord-ticketing-category"
                    type="text"
                    inputmode="numeric"
                    autocomplete="off"
                    placeholder="Optional: paste a category ID"
                  />
                </div>
              </label>
              <label for="discord-ticketing-log">Log channel ID
                <div class="input-combo">
                  <select id="discord-ticketing-log-select" class="input-combo-select">
                    <option value="">Select a channel</option>
                  </select>
                  <input
                    id="discord-ticketing-log"
                    type="text"
                    inputmode="numeric"
                    autocomplete="off"
                    placeholder="Optional: paste a channel ID"
                  />
                </div>
              </label>
            </div>
            <div class="discord-field-grid">
              <label for="discord-ticketing-role">Staff role ID
                <div class="input-combo">
                  <select id="discord-ticketing-role-select" class="input-combo-select">
                    <option value="">Select a role</option>
                  </select>
                  <input
                    id="discord-ticketing-role"
                    type="text"
                    inputmode="numeric"
                    autocomplete="off"
                    placeholder="Optional: paste a role ID"
                  />
                </div>
              </label>
              <label class="checkbox" for="discord-ticketing-ping">
                <input type="checkbox" id="discord-ticketing-ping" />
                <span>Ping the staff role when tickets open</span>
              </label>
            </div>
            <div class="discord-field-grid">
              <label for="discord-ticketing-panel-channel">Panel channel ID
                <div class="input-combo">
                  <select id="discord-ticketing-panel-channel-select" class="input-combo-select">
                    <option value="">Select a channel</option>
                  </select>
                  <input
                    id="discord-ticketing-panel-channel"
                    type="text"
                    inputmode="numeric"
                    autocomplete="off"
                    placeholder="Optional: paste a panel channel ID"
                  />
                </div>
              </label>
              <label for="discord-ticketing-panel-message">Panel message ID
                <input
                  id="discord-ticketing-panel-message"
                  type="text"
                  inputmode="numeric"
                  autocomplete="off"
                  placeholder="Optional: existing panel message"
                />
              </label>
            </div>
            <p id="teamDiscordChannelsStatus" class="notice hidden centered-notice"></p>
          </div>
          <div class="row align-start">
            <button type="submit" class="accent">Save ticketing settings</button>
            <p id="teamTicketingStatus" class="notice hidden inline-notice" role="status" aria-live="polite"></p>
          </div>
        <div class="command-roles-panel" data-command-section="ticket">
          <div class="discord-section-note">
            <h5>Ticket command access</h5>
            <p class="muted small">Assign roles to each /ticket subcommand or leave blank to allow everyone.</p>
          </div>
          <div class="discord-command-entry-list two-column" data-command-list="ticket"></div>
          <div class="row">
            <button type="button" class="accent" data-command-save="ticket">Save ticket command roles</button>
          </div>
          <p class="notice hidden" data-command-status="ticket"></p>
          <p id="teamCommandRolesStatus" class="notice hidden centered-notice"></p>
        </div>
        </form>
      </section>
      <section
        id="discordTabMonitoring"
        class="team-discord-auth discord-card discord-section-card discord-tab-panel"
        data-discord-panel="monitoring"
        role="tabpanel"
        aria-labelledby="discordCommandHeading"
      >
        <div class="discord-card-header">
          <div>
            <span class="discord-chip" aria-hidden="true">Monitoring</span>
            <h4 id="discordCommandHeading">Monitoring &amp; lookup commands</h4>
            <p class="muted small">Control who can run the Server Status and Player Lookup slash commands.</p>
          </div>
        </div>
        <div class="discord-command-mod-panels stacked">
          <article class="discord-command-card" aria-labelledby="discord-status-module-title" data-command-section="ruststatus">
            <div class="discord-command-card-head">
              <div>
                <span class="discord-chip" aria-hidden="true">Commands</span>
                <h6 id="discord-status-module-title">Server status</h6>
                <p class="muted tiny">/ruststatus family</p>
              </div>
            </div>
            <div class="discord-command-entry-list two-column" data-command-list="ruststatus"></div>
            <div class="row">
              <button type="button" class="accent" data-command-save="ruststatus">Save server status roles</button>
            </div>
            <p class="notice hidden centered-notice" data-command-status="ruststatus"></p>
          </article>
          <article class="discord-command-card" aria-labelledby="discord-lookup-module-title" data-command-section="rustlookup">
            <div class="discord-command-card-head">
              <div>
                <span class="discord-chip" aria-hidden="true">Commands</span>
                <h6 id="discord-lookup-module-title">Player lookup</h6>
                <p class="muted tiny">/rustlookup family</p>
              </div>
            </div>
            <div class="discord-command-entry-list two-column" data-command-list="rustlookup"></div>
            <div class="row">
              <button type="button" class="accent" data-command-save="rustlookup">Save player lookup roles</button>
            </div>
            <p class="notice hidden centered-notice" data-command-status="rustlookup"></p>
          </article>
        </div>
      </section>
    </div>
  </section>
  </section>
