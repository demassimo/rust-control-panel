<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="panel-api-base" content="http://localhost:8787" />
  <title>Rust Admin Online ‚Äî Open Source</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <div class="app-shell">
    <section id="loginPanel" class="login-layout">
      <div class="login-hero">
        <div class="brand">
          <span class="brand-icon" aria-hidden="true">üõ°Ô∏è</span>
          <div>
            <h1>Rust Admin Dashboard</h1>
            <p>Stay on top of every wipe with live server telemetry, team management and rapid response tools.</p>
          </div>
        </div>
        <ul class="hero-points">
          <li>Realtime console streaming with quick commands</li>
          <li>Live map overlays with player and team syncing</li>
          <li>Role-based access control for trusted operators</li>
        </ul>
      </div>
      <div class="login-grid">
        <div class="login-card">
          <h2>Sign in</h2>
          <p class="muted">Enter your credentials to continue.</p>
          <label>Username<input id="username" value="admin" autocomplete="username"></label>
          <label>Password<input id="password" type="password" value="admin123" autocomplete="current-password"></label>
          <button id="btnLogin" class="accent">Sign in</button>
          <p id="loginError" class="notice hidden"></p>
          <p class="muted small">Default credentials are for first boot only ‚Äî change them once you are inside.</p>
        </div>
        <div class="login-card" id="registerCard">
          <h2>Create an account</h2>
          <p id="registerInfo" class="muted">Registration is disabled by the administrator.</p>
          <div id="registerForm" class="hidden">
            <label>Username<input id="regUsername" autocomplete="username" placeholder="yourname"></label>
            <label>Password<input id="regPassword" type="password" autocomplete="new-password" placeholder="Minimum 8 characters"></label>
            <label>Confirm password<input id="regConfirm" type="password" autocomplete="new-password"></label>
            <button id="btnRegister" class="ghost">Register</button>
            <p id="registerError" class="notice hidden"></p>
            <p id="registerSuccess" class="notice success hidden"></p>
          </div>
        </div>
      </div>
    </section>

    <section id="appPanel" class="hidden app-layout">
      <header class="app-header">
        <div class="brand">
          <span class="brand-icon" aria-hidden="true">üõ°Ô∏è</span>
          <div class="brand-meta">
            <h1>Rust Admin Dashboard</h1>
            <div class="brand-account">
              <span class="muted">Welcome back,</span>
              <button id="profileMenuTrigger" type="button" class="brand-profile" aria-haspopup="true" aria-expanded="false" aria-controls="userBox">
                <span id="welcomeName" class="profile-name">operator</span>
                <span class="chevron" aria-hidden="true">‚ñæ</span>
              </button>
              <div id="userBox" class="user-box hidden" role="menu" aria-labelledby="profileMenuTrigger" aria-hidden="true"></div>
            </div>
          </div>
        </div>
        <div class="header-controls">
          <nav id="mainNav" class="topnav hidden" aria-label="Application navigation">
            <button id="navDashboard" type="button" class="nav-btn active">Dashboard</button>
          </nav>
        </div>
      </header>

      <main id="dashboardPanel" class="dashboard">
        <section class="servers-section">
          <div class="section-head">
            <div>
              <h2>Servers</h2>
              <p class="muted">Monitor uptime and player population at a glance.</p>
            </div>
            <div class="section-actions">
              <button id="btnRefreshServers" class="ghost icon" title="Refresh servers">‚ü≥</button>
            </div>
          </div>
          <div id="servers" class="server-grid">
            <button id="addServerPrompt" type="button" class="server-card add-server-prompt" aria-controls="addServerCard" aria-expanded="false">
              <span class="add-icon" aria-hidden="true">Ôºã</span>
              <span class="add-text">Add a server</span>
              <span class="add-subtext muted small">Connect a Rust server to monitor it here.</span>
            </button>
          </div>
          <p id="serversEmpty" class="empty-state hidden">No servers added yet. Connect your first Rust server to get started.</p>
          <div id="addServerCard" class="add-server-card hidden">
            <h3>Add server</h3>
            <div class="grid2">
              <input id="svName" placeholder="Name">
              <input id="svHost" placeholder="Host/IP">
              <input id="svPort" type="number" placeholder="RCON Port" value="28017">
              <input id="svPass" placeholder="Password">
            </div>
            <label class="inline"><input type="checkbox" id="svTLS"> Use TLS (wss)</label>
            <div class="row">
              <button id="btnAddServer" class="accent">Save server</button>
            </div>
          </div>
        </section>
        <aside id="userCard" class="team-card hidden">
          <div class="section-head">
            <div>
              <h2>Team access</h2>
              <p class="muted">Invite trusted admins and manage their roles.</p>
            </div>
          </div>
          <div class="team-card-body">
            <div class="user-create">
              <h4>Invite a teammate</h4>
              <div class="grid2 stack-sm">
                <input id="newUserName" placeholder="Username">
                <input id="newUserPassword" type="password" placeholder="Temporary password">
              </div>
              <label>Role
                <select id="newUserRole">
                  <option value="user">User</option>
                  <option value="admin">Admin</option>
                </select>
              </label>
              <div class="row">
                <button id="btnCreateUser" class="accent">Create user</button>
              </div>
              <p id="userFeedback" class="notice hidden"></p>
            </div>
            <h4>Existing users</h4>
            <ul id="userList" class="users"></ul>
          </div>
        </aside>
      </main>

      <section id="workspacePanel" class="workspace hidden">
        <div class="workspace-header">
          <button id="btnBackToDashboard" class="ghost small">‚Üê Back to Dashboard</button>
          <div class="workspace-title">
            <h2 id="workspaceServerName">Main PvP Server</h2>
            <p id="workspaceServerMeta" class="muted small">192.168.1.100:28015</p>
          </div>
          <span id="workspaceStatus" class="status-pill">offline</span>
        </div>

        <nav id="workspaceMenu" class="workspace-menu" aria-label="Server sections">
          <button type="button" class="menu-tab active" data-view="players" aria-pressed="true">Players</button>
          <button type="button" class="menu-tab" data-view="map" aria-pressed="false">Map</button>
          <button type="button" class="menu-tab" data-view="settings" aria-pressed="false">Settings</button>
          <button type="button" class="menu-tab" data-view="console" aria-pressed="false">Console</button>
          <button type="button" class="menu-tab" data-view="dashboard" aria-pressed="false">Dashboard</button>
        </nav>

        <div class="workspace-views">
          <section id="workspaceViewPlayers" class="workspace-view active" data-view="players" aria-hidden="false">
            <div class="card players-card" data-module-card="live-players">
              <div class="card-header">
                <div class="card-title-group">
                  <h3><span data-module-title>Current Players</span> <span id="player-count" class="muted small">(0)</span></h3>
                  <div class="module-actions" data-module-actions></div>
                </div>
              </div>
              <div class="module-host players-live" data-module-slot="live-players"></div>
            </div>

            <div class="card directory-card" data-module-card="players-directory">
              <div class="card-header">
                <div class="card-title-group">
                  <h3><span data-module-title>All Players</span></h3>
                  <div class="module-actions" data-module-actions></div>
                </div>
              </div>
              <div class="module-host players-directory" data-module-slot="players-directory"></div>
            </div>
          </section>

          <section id="workspaceViewMap" class="workspace-view" data-view="map" aria-hidden="true">
            <div class="card map-card" data-module-card="live-map">
              <div class="card-header">
                <div class="card-title-group">
                  <h3><span data-module-title>Live Map</span></h3>
                  <div class="module-actions" data-module-actions></div>
                </div>
              </div>
              <div class="module-host map-body" data-module-slot="live-map"></div>
            </div>
          </section>

          <section id="workspaceViewSettings" class="workspace-view" data-view="settings" aria-hidden="true">
            <div class="card settings-card">
              <div class="card-header">
                <div class="card-title-group">
                  <h3>Discord Integration</h3>
                  <p class="muted small">Run one Discord bot per server and surface live activity in your channels.</p>
                </div>
                <span id="discord-bot-status" class="status-pill offline bot-status-pill">Do Not Disturb</span>
              </div>
              <div id="discord-settings" class="discord-settings-grid" aria-live="polite">
                <section class="discord-status">
                  <h4 class="discord-section-title">Live status</h4>
                  <div class="discord-status-summary">
                    <article class="discord-stat">
                      <span class="label">Current players</span>
                      <strong class="value" id="discord-current-players">0</strong>
                    </article>
                    <article class="discord-stat">
                      <span class="label">Max players</span>
                      <strong class="value" id="discord-max-players">‚Äî</strong>
                    </article>
                    <article class="discord-stat">
                      <span class="label">Joining</span>
                      <strong class="value" id="discord-joining">0</strong>
                    </article>
                  </div>
                  <p class="discord-last-check" id="discord-last-check">Last check: ‚Äî</p>
                </section>
                <section class="discord-form-wrap">
                  <h4 class="discord-section-title">Configure bot</h4>
                  <form id="discord-form" class="discord-form">
                    <label class="field">
                      <span class="field-label">Discord bot token</span>
                      <input type="password" id="discord-bot-token" name="botToken" autocomplete="off" placeholder="Paste bot token" />
                      <small class="muted">Leave blank to keep the existing token.</small>
                    </label>
                    <label class="field">
                      <span class="field-label">Discord server (guild) ID</span>
                      <input type="text" id="discord-guild-id" name="guildId" inputmode="numeric" autocomplete="off" placeholder="e.g. 123456789012345678" />
                    </label>
                    <label class="field">
                      <span class="field-label">Discord channel ID</span>
                      <input type="text" id="discord-channel-id" name="channelId" inputmode="numeric" autocomplete="off" placeholder="e.g. 123456789012345678" />
                    </label>
                    <div class="form-actions">
                      <button type="submit" class="accent">Save integration</button>
                      <button type="button" class="ghost" id="discord-remove">Remove</button>
                    </div>
                    <p class="notice hidden discord-notice" id="discord-notice"></p>
                  </form>
                </section>
              </div>
            </div>
          </section>

          <section id="workspaceViewConsole" class="workspace-view" data-view="console" aria-hidden="true">
            <div class="card console-card">
              <div class="card-header">
                <h3>Console</h3>
                <div class="card-controls">
                  <button id="btnClearConsole" class="icon" title="Clear console">‚úï</button>
                </div>
              </div>
              <pre id="console"></pre>
              <div class="row">
                <input id="cmd" placeholder="say &quot;Hello&quot; | status | kick &lt;steamid&gt; reason">
                <button id="btnSend" class="accent">Send</button>
              </div>
              <div class="row quick-row" id="quickCommands"></div>
            </div>
          </section>

          <section id="workspaceViewDashboard" class="workspace-view" data-view="dashboard" aria-hidden="true">
            <div class="workspace-summary">
              <div class="summary-card">
                <span class="summary-label">Players</span>
                <strong id="workspacePlayers">--</strong>
              </div>
              <div class="summary-card">
                <span class="summary-label">Queue</span>
                <strong id="workspaceQueue">--</strong>
              </div>
              <div class="summary-card">
                <span class="summary-label">Joining</span>
                <strong id="workspaceJoining">--</strong>
              </div>
            </div>

            <div class="card info-card">
              <div class="card-header">
                <h3>Server Overview</h3>
              </div>
              <div class="info-grid">
                <div class="info-item">
                  <span class="label">Players</span>
                  <span class="value" id="workspaceInfoPlayers">‚Äî</span>
                </div>
                <div class="info-item">
                  <span class="label">Max players</span>
                  <span class="value" id="workspaceInfoMaxPlayers">‚Äî</span>
                </div>
                <div class="info-item">
                  <span class="label">Queue</span>
                  <span class="value" id="workspaceInfoQueue">‚Äî</span>
                </div>
                <div class="info-item">
                  <span class="label">Joining</span>
                  <span class="value" id="workspaceInfoJoining">‚Äî</span>
                </div>
                <div class="info-item">
                  <span class="label">Game time</span>
                  <span class="value" id="workspaceInfoGameTime">‚Äî</span>
                </div>
                <div class="info-item">
                  <span class="label">Uptime</span>
                  <span class="value" id="workspaceInfoUptime">‚Äî</span>
                </div>
                <div class="info-item">
                  <span class="label">Framerate</span>
                  <span class="value" id="workspaceInfoFramerate">‚Äî</span>
                </div>
                <div class="info-item">
                  <span class="label">Network in</span>
                  <span class="value" id="workspaceInfoNetworkIn">‚Äî</span>
                </div>
                <div class="info-item">
                  <span class="label">Network out</span>
                  <span class="value" id="workspaceInfoNetworkOut">‚Äî</span>
                </div>
                <div class="info-item">
                  <span class="label">Last save</span>
                  <span class="value" id="workspaceInfoSaveCreatedTime">‚Äî</span>
                </div>
              </div>
            </div>
          </section>
        </div>

        <div id="moduleFallback" class="module-stack hidden" aria-hidden="true"></div>
      </section>

      <section id="settingsPanel" class="hidden settings-panel">
        <div class="profile-grid">
          <div class="profile-card">
            <div class="profile-card-head">
              <h3>Profile Information</h3>
              <p class="muted small">Manage your personal details.</p>
            </div>
            <div class="profile-card-body">
              <div class="profile-field">
                <span class="label">Username</span>
                <span id="profileUsername" class="value muted">‚Äî</span>
              </div>
              <div class="profile-field">
                <span class="label">Role</span>
                <span id="profileRole" class="value muted">‚Äî</span>
              </div>
            </div>
          </div>

          <div class="profile-card">
            <div class="profile-card-head">
              <h3>RustMaps Integration</h3>
              <p class="muted small">Paste your API key to enable live map rendering.</p>
            </div>
            <div class="profile-card-body">
              <label>RustMaps API key
                <input id="rustMapsKey" placeholder="pk_live_..." autocomplete="off">
              </label>
              <div class="row">
                <button id="btnSaveSettings" class="accent">Save settings</button>
              </div>
              <p id="settingsStatus" class="notice hidden"></p>
            </div>
          </div>

          <div class="profile-card">
            <div class="profile-card-head">
              <h3>Change Password</h3>
              <p class="muted small">Update your password regularly to keep access secure.</p>
            </div>
            <div class="profile-card-body">
              <label>Current Password
                <input type="password" id="currentPassword" placeholder="Enter current password" autocomplete="current-password">
              </label>
              <label>New Password
                <input type="password" id="newPassword" placeholder="Minimum 8 characters" autocomplete="new-password">
              </label>
              <label>Confirm Password
                <input type="password" id="confirmPassword" placeholder="Repeat new password" autocomplete="new-password">
              </label>
              <div class="row">
                <button id="btnChangePassword" class="accent">Update password</button>
              </div>
              <p id="passwordStatus" class="notice hidden"></p>
            </div>
          </div>

          <div class="profile-card">
            <div class="profile-card-head">
              <h3>Two-Factor Authentication</h3>
              <p class="muted small">Add an extra layer of security to your account.</p>
            </div>
            <div class="profile-card-body">
              <div class="profile-field">
                <span class="label">2FA Status</span>
                <span class="value muted">Disabled</span>
              </div>
              <button class="ghost" disabled>Enable 2FA</button>
              <p class="muted small">Coming soon.</p>
            </div>
          </div>
        </div>
      </section>
    </section>
  </div>

  <script src="assets/modules/module-loader.js"></script>
  <script src="assets/modules/live-players.js"></script>
  <script src="assets/modules/players.js"></script>
  <script src="assets/modules/map.js"></script>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js" crossorigin="anonymous"></script>
  <script src="assets/js/server-settings.js"></script>
  <script src="assets/app.js"></script>
</body>
</html>
