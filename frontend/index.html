<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="panel-api-base" content="/api" />
  <title>Rust Admin Online — Open Source</title>
  <link rel="icon" type="image/svg+xml" href="assets/icons/favicon.svg" />
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <div class="app-shell">
    <section id="loginPanel" class="login-layout">
      <div class="login-hero">
        <div class="brand">
          <span class="brand-icon" aria-hidden="true">
            <img src="assets/icons/shield.svg" alt="" />
          </span>
          <div>
            <h1>Rust Admin Dashboard</h1>
            <p>Stay on top of every wipe with live server telemetry, team management and rapid response tools.</p>
          </div>
        </div>
        <ul class="hero-points">
          <li>Realtime console streaming with quick commands</li>
          <li>Live map overlays with player and team syncing</li>
          <li>Role-based access control for trusted operators</li>
        </ul>
      </div>
      <div class="login-grid">
        <div class="login-card">
          <h2>Sign in</h2>
          <p class="muted">Enter your credentials to continue.</p>
          <label>Username<input id="username" autocomplete="username" placeholder="Username"></label>
          <label>Password<input id="password" type="password" autocomplete="current-password" placeholder="Password"></label>
          <button id="btnLogin" class="accent">Sign in</button>
          <p id="loginError" class="notice hidden"></p>
          <p class="muted small">Default credentials are for first boot only — change them once you are inside.</p>
        </div>
        <div class="login-card" id="registerCard">
          <h2>Create an account</h2>
          <p id="registerInfo" class="muted">Registration is disabled by the administrator.</p>
          <div id="registerForm" class="hidden">
            <label>Username<input id="regUsername" autocomplete="username" placeholder="yourname"></label>
            <label>Password<input id="regPassword" type="password" autocomplete="new-password" placeholder="Minimum 8 characters"></label>
            <label>Confirm password<input id="regConfirm" type="password" autocomplete="new-password"></label>
            <button id="btnRegister" class="ghost">Register</button>
            <p id="registerError" class="notice hidden"></p>
            <p id="registerSuccess" class="notice success hidden"></p>
          </div>
        </div>
      </div>
    </section>

    <section id="appPanel" class="hidden app-layout">
      <header class="app-header">
        <div class="brand">
          <span class="brand-icon" aria-hidden="true">
            <img src="assets/icons/shield.svg" alt="" />
          </span>
          <div class="brand-meta">
            <h1>Rust Admin Dashboard</h1>
            <div class="brand-account">
              <span class="muted">Welcome back,</span>
              <button id="profileMenuTrigger" type="button" class="brand-profile" aria-haspopup="true" aria-expanded="false" aria-controls="userBox">
                <span id="welcomeName" class="profile-name">operator</span>
                <span class="chevron" aria-hidden="true">▾</span>
              </button>
              <div id="userBox" class="user-box hidden" role="menu" aria-labelledby="profileMenuTrigger" aria-hidden="true"></div>
            </div>
          </div>
        </div>
        <div class="header-controls">
          <div id="teamSwitcher" class="team-switcher hidden" aria-hidden="true">
            <div class="team-select-group">
              <span id="teamSelectLabel" class="team-select-label">Team Selector</span>
              <div class="team-select-wrap">
                <select id="teamSelect" aria-labelledby="teamSelectLabel"></select>
                <span class="team-select-arrow" aria-hidden="true">▾</span>
              </div>
            </div>
          </div>
          <nav id="mainNav" class="topnav hidden" aria-label="Application navigation">
            <button id="navDashboard" type="button" class="nav-btn active">Dashboard</button>
            <button id="navTeam" type="button" class="nav-btn">Team</button>
            <button id="navDiscord" type="button" class="nav-btn">Discord</button>
          </nav>
        </div>
      </header>

      <main id="dashboardPanel" class="dashboard">
        <section class="servers-section">
          <div class="section-head">
            <div>
              <h2>Servers</h2>
              <p class="muted">Monitor uptime and player population at a glance.</p>
            </div>
            <div class="section-actions">
              <button id="btnRefreshServers" class="ghost icon" title="Refresh servers">⟳</button>
            </div>
          </div>
          <div id="servers" class="server-grid">
            <button id="addServerPrompt" type="button" class="server-card add-server-prompt" aria-controls="addServerCard" aria-expanded="false">
              <span class="add-icon" aria-hidden="true">＋</span>
              <span class="add-text">Add a server</span>
              <span class="add-subtext muted small">Connect a Rust server to monitor it here.</span>
            </button>
          </div>
          <p id="serversEmpty" class="empty-state hidden">No servers added yet. Connect your first Rust server to get started.</p>
          <div id="addServerCard" class="add-server-card hidden">
            <h3>Add server</h3>
            <div class="grid2">
              <input id="svName" placeholder="Name">
              <input id="svHost" placeholder="Host/IP">
              <input id="svPort" type="number" placeholder="RCON Port" value="28017">
              <input id="svPass" placeholder="Password">
            </div>
            <label class="inline"><input type="checkbox" id="svTLS"> Use TLS (wss)</label>
            <div class="row">
              <button id="btnAddServer" class="accent">Save server</button>
            </div>
          </div>
        </section>
      </main>

      <section id="teamPanel" class="team-panel hidden" aria-labelledby="teamPanelTitle">
        <div class="team-panel-head section-head">
          <div>
            <h2 id="teamPanelTitle">Team</h2>
            <p class="muted">Invite trusted admins, assign roles and manage access.</p>
          </div>
        </div>
        <div id="userCard" class="team-card">
          <div class="team-card-body">
            <aside id="userCreateSection" class="team-card-sidebar">
              <div class="team-card-sidebar-head">
                <h3>Invite a teammate</h3>
                <p class="muted small">Generate credentials and assign a role in one place.</p>
              </div>
              <div class="team-card-sidebar-body">
                <div class="grid2 stack-sm">
                  <input id="newUserName" placeholder="Username">
                  <input id="newUserPassword" type="password" placeholder="Temporary password">
                </div>
                <label>Role
                  <select id="newUserRole"></select>
                </label>
                <div class="row">
                  <button id="btnCreateUser" class="accent">Create user</button>
                </div>
                <p id="userFeedback" class="notice hidden"></p>
                <div class="team-card-divider" aria-hidden="true"><span>Or add existing user</span></div>
                <input id="existingUserName" placeholder="Existing username">
                <label>Role
                  <select id="existingUserRole"></select>
                </label>
                <div class="row">
                  <button id="btnAddExistingUser" class="ghost">Add to team</button>
                </div>
                <p id="existingUserFeedback" class="notice hidden"></p>
              </div>
            </aside>
            <div class="team-card-main">
              <section class="team-section">
                <div class="team-section-head">
                  <h4>Existing users</h4>
                  <p class="muted small">Manage passwords and roles for your operators.</p>
                </div>
                <ul id="userList" class="users"></ul>
              </section>
              <section class="team-section">
                <div class="team-section-head">
                  <h4 class="roles-header" id="rolesHeader">Roles</h4>
                  <p id="rolesDescription" class="muted small">Define reusable access levels for your team.</p>
                </div>
                <div id="roleManager" class="roles-manager">
                  <section id="roleCreateSection" class="role-section-card">
                    <div class="role-section-head">
                      <h5>Create a role</h5>
                      <p class="muted small">Define the basics for a new role before assigning permissions.</p>
                    </div>
                    <div class="grid2 stack-sm">
                      <input id="newRoleKey" placeholder="New role key">
                      <input id="newRoleName" placeholder="Name">
                    </div>
                    <p class="muted small">Role keys use letters, numbers, dashes or underscores and cannot be changed later.</p>
                    <div class="row">
                      <button id="btnCreateRole" class="ghost">Create role</button>
                    </div>
                  </section>
                  <section id="roleEditSection" class="role-section-card">
                    <div class="role-section-head">
                      <h5>Edit a role</h5>
                      <p id="roleEditorEmpty" class="muted small hidden">Select a role to review and adjust its settings.</p>
                    </div>
                    <div id="roleEditor" class="role-editor hidden" aria-hidden="true">
                      <p id="roleLockedNotice" class="notice warning small hidden">
                        You cannot edit a role that is currently assigned to you. Switch to another role to make changes.
                      </p>
                      <label for="roleSelect">Role
                        <select id="roleSelect"></select>
                      </label>
                      <label for="roleName">Role name
                        <input id="roleName" placeholder="Display name">
                        <span class="muted small">Shown wherever the role is referenced in the panel.</span>
                      </label>
                      <label for="roleDescription">Role description
                        <input id="roleDescription" placeholder="Description (optional)">
                        <span class="muted small">Give teammates context about what this role is for.</span>
                      </label>
                      <div class="role-access">
                        <div class="role-access-head">
                          <h5>Server access</h5>
                          <p class="muted small">Choose which servers this role can access.</p>
                        </div>
                        <div id="roleServersList" class="role-checkbox-list" role="group" aria-label="Allowed servers"></div>
                      </div>
                      <fieldset class="role-fieldset">
                        <legend>Server capabilities</legend>
                        <p class="muted small">Decide which actions this role can take on the servers they can reach.</p>
                        <div id="roleCapabilities" class="role-checkbox-list" role="group" aria-label="Server capabilities"></div>
                      </fieldset>
                      <fieldset class="role-fieldset">
                        <legend>Global permissions</legend>
                        <p class="muted small">Grant access to panel-wide tools and management features.</p>
                        <div
                          id="roleGlobalPermissions"
                          class="role-checkbox-list"
                          role="group"
                          aria-label="Global permissions"
                        ></div>
                      </fieldset>
                      <div class="row space-between">
                        <button id="btnSaveRole" class="accent">Save changes</button>
                        <button id="btnDeleteRole" class="ghost danger">Delete role</button>
                      </div>
                      <p id="roleFeedback" class="notice hidden"></p>
                    </div>
                  </section>
                </div>
              </section>
            </div>
          </div>
        </div>
      </section>

      <section id="discordPanel" class="discord-panel hidden" aria-labelledby="discordPanelTitle">
        <div class="section-head">
          <div>
            <h2 id="discordPanelTitle">Discord</h2>
            <p class="muted">Manage the shared Discord bot connection for your team.</p>
          </div>
        </div>
        <section id="teamDiscordSection" class="team-section" aria-labelledby="teamDiscordTitle">
          <div class="team-section-head">
            <h4 id="teamDiscordTitle">Team bot settings</h4>
            <p class="muted small">Store the bot token and guild ID used by your team automations.</p>
          </div>
          <form id="teamDiscordForm" class="team-discord-form" autocomplete="off">
            <label for="teamDiscordGuildId">Guild ID
              <input
                type="text"
                id="teamDiscordGuildId"
                name="teamDiscordGuildId"
                inputmode="numeric"
                autocomplete="off"
                autocapitalize="none"
                spellcheck="false"
                placeholder="Enter Discord guild ID"
              />
            </label>
            <label for="teamDiscordToken">Bot token
              <input
                type="password"
                id="teamDiscordToken"
                name="teamDiscordToken"
                autocomplete="new-password"
                autocapitalize="none"
                spellcheck="false"
                placeholder="Paste Discord bot token"
              />
            </label>
            <p id="teamDiscordHelp" class="muted small">
              The stored token stays hidden. Paste a new value to replace the existing one.
            </p>
            <dl id="teamDiscordSummary" class="team-discord-summary muted small">
              <div>
                <dt>Current guild ID</dt>
                <dd id="teamDiscordSummaryGuild">Not set</dd>
              </div>
              <div>
                <dt>Bot token</dt>
                <dd id="teamDiscordSummaryToken">Not linked</dd>
              </div>
            </dl>
            <div class="row">
              <button type="submit" class="accent" id="btnSaveTeamDiscord">Save settings</button>
              <button type="button" class="ghost danger" id="btnRemoveTeamDiscord">Remove settings</button>
            </div>
            <p id="teamDiscordStatus" class="notice hidden"></p>
          </form>
          <section id="teamDiscordServerSection" class="team-discord-server">
            <div class="team-section-head">
              <h4 id="teamDiscordServerTitle">Server Discord features</h4>
              <p class="muted small">Select a server to manage ticketing, command access, and Ruststatus embeds.</p>
            </div>
            <div class="team-discord-server-body">
              <label for="teamDiscordServerSelect" class="inline">
                Server
                <select id="teamDiscordServerSelect"></select>
              </label>
              <p id="teamDiscordServerNotice" class="notice small hidden"></p>
              <div class="team-discord-panels">
                <form id="teamDiscordTicketingForm" class="team-discord-form" autocomplete="off">
                  <h5>Ticketing</h5>
                  <label class="checkbox">
                    <input type="checkbox" id="teamTicketingEnabled" />
                    <span>Enable ticketing for this server</span>
                  </label>
                  <label for="teamTicketingCategory">Ticket category ID
                    <input id="teamTicketingCategory" type="text" inputmode="numeric" autocomplete="off" placeholder="e.g. 123456789012345678" />
                  </label>
                  <label for="teamTicketingLog">Log channel ID
                    <input id="teamTicketingLog" type="text" inputmode="numeric" autocomplete="off" placeholder="e.g. 123456789012345678" />
                  </label>
                  <label for="teamTicketingStaffRole">Staff role ID
                    <input id="teamTicketingStaffRole" type="text" inputmode="numeric" autocomplete="off" placeholder="e.g. 123456789012345678" />
                  </label>
                  <label class="checkbox">
                    <input type="checkbox" id="teamTicketingPingStaff" />
                    <span>Ping the staff role when a ticket opens</span>
                  </label>
                  <label for="teamTicketingPanelChannel">Panel channel ID
                    <input id="teamTicketingPanelChannel" type="text" inputmode="numeric" autocomplete="off" placeholder="e.g. 123456789012345678" />
                  </label>
                  <label for="teamTicketingPanelMessage">Panel message ID
                    <input id="teamTicketingPanelMessage" type="text" autocomplete="off" placeholder="Auto-generated" readonly />
                  </label>
                  <label for="teamTicketingWelcome">Welcome message
                    <textarea id="teamTicketingWelcome" rows="2" spellcheck="false"></textarea>
                  </label>
                  <label for="teamTicketingPrompt">Question prompt
                    <textarea id="teamTicketingPrompt" rows="2" spellcheck="false"></textarea>
                  </label>
                  <label for="teamTicketingPanelTitle">Panel title
                    <input id="teamTicketingPanelTitle" type="text" autocomplete="off" />
                  </label>
                  <label for="teamTicketingPanelDescription">Panel description
                    <textarea id="teamTicketingPanelDescription" rows="3" spellcheck="false"></textarea>
                  </label>
                  <label for="teamTicketingPanelButton">Panel button label
                    <input id="teamTicketingPanelButton" type="text" autocomplete="off" />
                  </label>
                  <div class="row">
                    <button type="submit" class="accent" id="teamTicketingSave">Save ticketing settings</button>
                  </div>
                  <p id="teamTicketingStatus" class="notice hidden"></p>
                </form>
                <form id="teamRuststatusForm" class="team-discord-form" autocomplete="off">
                  <h5>Ruststatus &amp; commands</h5>
                  <label for="teamCommandToken">Command bot token
                    <input id="teamCommandToken" type="password" autocomplete="off" placeholder="Paste Discord bot token" />
                    <small class="muted">Leave blank to keep the stored value. Enter <code>reset</code> to clear the command token.</small>
                  </label>
                  <fieldset class="field-grid">
                    <legend class="field-label">Displayed statistics</legend>
                    <div class="field-grid-row checkbox-grid">
                      <label class="checkbox">
                        <input type="checkbox" id="teamRuststatusJoining" data-ruststatus-field="joining" />
                        <span>Joining players</span>
                      </label>
                      <label class="checkbox">
                        <input type="checkbox" id="teamRuststatusQueued" data-ruststatus-field="queued" />
                        <span>Queue length</span>
                      </label>
                      <label class="checkbox">
                        <input type="checkbox" id="teamRuststatusSleepers" data-ruststatus-field="sleepers" />
                        <span>Sleeping players</span>
                      </label>
                      <label class="checkbox">
                        <input type="checkbox" id="teamRuststatusFps" data-ruststatus-field="fps" />
                        <span>Server FPS</span>
                      </label>
                      <label class="checkbox">
                        <input type="checkbox" id="teamRuststatusLastUpdate" data-ruststatus-field="lastUpdate" />
                        <span>Last update timestamp</span>
                      </label>
                    </div>
                  </fieldset>
                  <div class="row">
                    <button type="submit" class="accent" id="teamRuststatusSave">Save Ruststatus settings</button>
                  </div>
                  <p id="teamRuststatusStatus" class="notice hidden"></p>
                </form>
              </div>
            </div>
          </section>
          <section id="teamAuthSection" class="team-discord-auth">
            <div class="team-section-head">
              <h4 id="teamAuthTitle">Discord authentication</h4>
              <p class="muted small">Control whether team members must link Discord before receiving roles.</p>
            </div>
            <form id="teamAuthForm" class="team-discord-form" autocomplete="off">
              <label class="checkbox">
                <input type="checkbox" id="teamAuthEnabled" />
                <span>Require Discord authentication</span>
              </label>
              <label for="teamAuthRole">Auto-assign role ID
                <input id="teamAuthRole" type="text" inputmode="numeric" autocomplete="off" placeholder="e.g. 123456789012345678" />
              </label>
              <div class="row">
                <button type="submit" class="accent" id="teamAuthSave">Save authentication settings</button>
              </div>
              <p id="teamAuthStatus" class="notice hidden"></p>
            </form>
          </section>
        </section>
      </section>

      <div id="userDetailsOverlay" class="modal-overlay hidden" aria-hidden="true"></div>
      <aside
        id="userDetailsPanel"
        class="user-details-panel hidden"
        role="dialog"
        aria-modal="true"
        aria-labelledby="userDetailsName"
        tabindex="-1"
      >
        <div class="user-details-head">
          <div>
            <p id="userDetailsSubtitle" class="muted small">Team member details</p>
            <h3 id="userDetailsName"></h3>
          </div>
          <button id="userDetailsClose" type="button" class="ghost icon" aria-label="Close user details">✕</button>
        </div>
        <div class="user-details-body">
          <div class="user-details-badges">
            <span id="userDetailsRoleBadge" class="badge">Role</span>
          </div>
          <dl class="user-details-meta">
            <div>
              <dt>Role</dt>
              <dd id="userDetailsRole">—</dd>
            </div>
            <div>
              <dt>Joined</dt>
              <dd id="userDetailsCreated">—</dd>
            </div>
            <div>
              <dt>User ID</dt>
              <dd id="userDetailsId">—</dd>
            </div>
          </dl>
          <p id="userDetailsSelfNotice" class="notice small hidden">
            This is your account. Role changes and removal are disabled here.
          </p>
          <div class="user-details-actions">
            <div class="user-role-editor">
              <label class="inline">Role
                <select id="userDetailsRoleSelect"></select>
              </label>
              <button id="userDetailsSaveRole" type="button" class="ghost">Update role</button>
            </div>
            <p id="userDetailsRoleStatus" class="notice small hidden"></p>
            <button id="userDetailsResetPassword" type="button" class="ghost">Reset password</button>
            <button id="userDetailsDelete" type="button" class="ghost danger">Remove user</button>
          </div>
        </div>
      </aside>

      <div id="dialogOverlay" class="modal-overlay hidden" aria-hidden="true"></div>
      <form
        id="dialogModal"
        class="dialog hidden"
        role="dialog"
        aria-modal="true"
        aria-labelledby="dialogTitle"
        aria-hidden="true"
        tabindex="-1"
        novalidate
      >
        <div class="dialog-content">
          <h3 id="dialogTitle">Confirm</h3>
          <p id="dialogMessage" class="dialog-message"></p>
          <label id="dialogInputWrap" class="dialog-field hidden">
            <span id="dialogInputLabel">Value</span>
            <input id="dialogInput" type="text" autocomplete="off" />
          </label>
          <p id="dialogError" class="dialog-error hidden" role="alert"></p>
          <div class="dialog-actions">
            <button type="button" id="dialogCancel" class="ghost">Cancel</button>
            <button type="submit" id="dialogConfirm" class="accent">Confirm</button>
          </div>
        </div>
      </form>

      <section id="workspacePanel" class="workspace hidden">
        <div class="workspace-header">
          <button id="btnBackToDashboard" class="ghost small">← Back to Dashboard</button>
          <div class="workspace-title">
            <h2 id="workspaceServerName">Main PvP Server</h2>
            <p id="workspaceServerMeta" class="muted small">192.168.1.100:28015</p>
          </div>
          <span id="workspaceStatus" class="status-pill">offline</span>
        </div>

        <nav id="workspaceMenu" class="workspace-menu" aria-label="Server sections">
          <button type="button" class="menu-tab active" data-view="players" data-capability="players" aria-pressed="true">Players</button>
          <button type="button" class="menu-tab" data-view="map" data-capability="liveMap" aria-pressed="false">Map</button>
          <button type="button" class="menu-tab" data-view="settings" data-capability="manage" aria-pressed="false">Settings</button>
          <button type="button" class="menu-tab" data-view="chat" data-capability="console" aria-pressed="false">Chat</button>
          <button type="button" class="menu-tab" data-view="reports" data-capability="view" aria-pressed="false">Reports</button>
          <button type="button" class="menu-tab" data-view="aq-tickets" data-capability="view" aria-pressed="false">AQ Tickets</button>
          <button type="button" class="menu-tab" data-view="kills" data-capability="console" aria-pressed="false">Kill Feed</button>
          <button type="button" class="menu-tab" data-view="console" data-capability="console" aria-pressed="false">Console</button>
          <button type="button" class="menu-tab" data-view="dashboard" data-capability="view" aria-pressed="false">Dashboard</button>
        </nav>

        <div class="workspace-views">
          <section id="workspaceViewPlayers" class="workspace-view active" data-view="players" data-capability="players" aria-hidden="false">
            <div class="card graph-card module-hidden" data-module-card="players-graph">
              <div class="card-header">
                <div class="card-title-group">
                  <h3><span data-module-title>Player History</span></h3>
                  <div class="module-actions" data-module-actions></div>
                </div>
              </div>
              <div class="module-body" data-module-slot="players-graph"></div>
            </div>

            <div class="card players-card" data-module-card="live-players">
              <div class="card-header">
                <div class="card-title-group">
                  <h3><span data-module-title>Current Players</span> <span id="player-count" class="muted small">(0)</span></h3>
                  <div class="module-actions" data-module-actions></div>
                </div>
              </div>
              <div class="module-host players-live" data-module-slot="live-players"></div>
            </div>

            <div class="card directory-card" data-module-card="players-directory">
              <div class="card-header">
                <div class="card-title-group">
                  <h3><span data-module-title>All Players</span> <span id="player-directory-count" class="muted small">(0)</span></h3>
                  <div class="module-actions" data-module-actions></div>
                </div>
              </div>
              <div class="module-host players-directory" data-module-slot="players-directory"></div>
            </div>
          </section>

          <section id="workspaceViewMap" class="workspace-view" data-view="map" data-capability="liveMap" aria-hidden="true">
            <div class="card map-card" data-module-card="live-map">
              <div class="card-header">
                <div class="card-title-group">
                  <h3><span data-module-title>Live Map</span></h3>
                  <div class="module-actions" data-module-actions></div>
                </div>
              </div>
              <div class="module-host map-body" data-module-slot="live-map"></div>
            </div>
          </section>

          <section id="workspaceViewSettings" class="workspace-view" data-view="settings" data-capability="manage" aria-hidden="true">
            <div class="card settings-card">
              <div class="card-header">
                <div class="card-title-group">
                  <h3>Discord status</h3>
                  <p class="muted small">
                    Control how this server's Discord bot presents itself. Manage ticketing, authentication, and Ruststatus embeds
                    from the Team → Discord tab.
                  </p>
                </div>
                <span id="discord-bot-status" class="status-pill offline bot-status-pill">Do Not Disturb</span>
              </div>
              <div id="discord-settings" class="discord-settings-grid" aria-live="polite">
                <section class="discord-status">
                  <h4 class="discord-section-title">Live status</h4>
                  <div class="discord-status-summary">
                    <article class="discord-stat">
                      <span class="label">Current players</span>
                      <strong class="value" id="discord-current-players">0</strong>
                    </article>
                    <article class="discord-stat">
                      <span class="label">Max players</span>
                      <strong class="value" id="discord-max-players">—</strong>
                    </article>
                    <article class="discord-stat">
                      <span class="label">Joining</span>
                      <strong class="value" id="discord-joining">0</strong>
                    </article>
                  </div>
                  <p class="discord-last-check" id="discord-last-check">Last check: —</p>
                  <div class="discord-config-summary" id="discord-config-summary">
                    <div class="discord-config-group">
                      <h5 class="discord-config-title">Presence template</h5>
                      <p id="discord-presence-template" class="discord-config-value muted">—</p>
                      <dl class="discord-config-list">
                        <div>
                          <dt>Online presence</dt>
                          <dd id="discord-presence-status-online">—</dd>
                        </div>
                        <div>
                          <dt>Offline presence</dt>
                          <dd id="discord-presence-status-offline">—</dd>
                        </div>
                        <div>
                          <dt>Stale presence</dt>
                          <dd id="discord-presence-status-stale">—</dd>
                        </div>
                        <div>
                          <dt>Queue presence</dt>
                          <dd id="discord-presence-status-waiting">—</dd>
                        </div>
                      </dl>
                    </div>
                    <div class="discord-config-group">
                      <h5 class="discord-config-title">Displayed stats</h5>
                      <ul id="discord-enabled-fields" class="discord-config-tags"></ul>
                      <p id="discord-enabled-fields-empty" class="discord-config-empty muted small hidden">
                        No stats will be posted.
                      </p>
                    </div>
                  </div>
                </section>
                <section class="discord-status-editor">
                  <h4 class="discord-section-title">Configure status appearance</h4>
                  <form id="discord-status-form" class="discord-status-form" autocomplete="off">
                    <label class="field">
                      <span class="field-label">Presence template</span>
                      <textarea
                        id="discord-presence-template-input"
                        name="presenceTemplate"
                        rows="2"
                        spellcheck="false"
                        autocapitalize="none"
                        placeholder="e.g. {statusEmoji} {playerCount} on {serverName}"
                      ></textarea>
                      <small class="muted">
                        Use tokens like <code>{serverName}</code>, <code>{playerCount}</code>, and <code>{statusEmoji}</code> to
                        control the bot's presence message.
                      </small>
                    </label>
                    <fieldset class="field-grid">
                      <legend class="field-label">Presence states</legend>
                      <div class="field-grid-row">
                        <label for="discord-presence-online" class="inline">
                          Online
                          <select id="discord-presence-online" name="presenceOnline">
                            <option value="online">Online</option>
                            <option value="idle">Idle</option>
                            <option value="dnd">Do Not Disturb</option>
                            <option value="invisible">Invisible</option>
                          </select>
                        </label>
                        <label for="discord-presence-offline" class="inline">
                          Offline
                          <select id="discord-presence-offline" name="presenceOffline">
                            <option value="online">Online</option>
                            <option value="idle">Idle</option>
                            <option value="dnd">Do Not Disturb</option>
                            <option value="invisible">Invisible</option>
                          </select>
                        </label>
                      </div>
                      <div class="field-grid-row">
                        <label for="discord-presence-stale" class="inline">
                          Stale data
                          <select id="discord-presence-stale" name="presenceStale">
                            <option value="online">Online</option>
                            <option value="idle">Idle</option>
                            <option value="dnd">Do Not Disturb</option>
                            <option value="invisible">Invisible</option>
                          </select>
                        </label>
                        <label for="discord-presence-waiting" class="inline">
                          Queue detected
                          <select id="discord-presence-waiting" name="presenceWaiting">
                            <option value="online">Online</option>
                            <option value="idle">Idle</option>
                            <option value="dnd">Do Not Disturb</option>
                            <option value="invisible">Invisible</option>
                          </select>
                        </label>
                      </div>
                    </fieldset>
                    <fieldset class="field-grid">
                      <legend class="field-label">Displayed statistics</legend>
                      <div class="field-grid-row checkbox-grid">
                        <label class="checkbox">
                          <input type="checkbox" id="discord-field-joining" data-status-field="joining" />
                          <span>Joining players</span>
                        </label>
                        <label class="checkbox">
                          <input type="checkbox" id="discord-field-queued" data-status-field="queued" />
                          <span>Queue length</span>
                        </label>
                        <label class="checkbox">
                          <input type="checkbox" id="discord-field-sleepers" data-status-field="sleepers" />
                          <span>Sleeping players</span>
                        </label>
                        <label class="checkbox">
                          <input type="checkbox" id="discord-field-fps" data-status-field="fps" />
                          <span>Server FPS</span>
                        </label>
                        <label class="checkbox">
                          <input type="checkbox" id="discord-field-lastUpdate" data-status-field="lastUpdate" />
                          <span>Last update timestamp</span>
                        </label>
                      </div>
                    </fieldset>
                    <div class="form-actions">
                      <button type="submit" class="accent" id="discord-status-save">Save status settings</button>
                    </div>
                    <p class="notice hidden discord-notice" id="discord-status-notice"></p>
                  </form>
                </section>
              </div>
            </div>
          </section>

          <section id="workspaceViewReports" class="workspace-view" data-view="reports" data-capability="view" aria-hidden="true">
            <div class="card reports-card">
              <div class="card-header">
                <div class="card-title-group">
                  <h3>F7 Reports</h3>
                  <p class="muted small">Monitor incoming in-game reports from players around the clock.</p>
                </div>
                <div class="card-controls reports-scope-controls" role="tablist" aria-label="Report scope">
                  <button type="button" class="reports-scope-btn active" data-scope="new" role="tab" aria-selected="true">New</button>
                  <button type="button" class="reports-scope-btn" data-scope="all" role="tab" aria-selected="false">All</button>
                  <p id="f7ReportsCount" class="reports-count muted small" aria-live="polite"></p>
                </div>
              </div>
              <div class="reports-body">
                <aside class="reports-list" aria-label="F7 reports">
                  <label class="reports-search">
                    <span class="sr-only">Filter F7 reports</span>
                    <input type="search" id="f7ReportsSearch" name="f7ReportsSearch" placeholder="Search by player, reporter, or reason" autocomplete="off" />
                  </label>
                  <div id="f7ReportsFocus" class="reports-focus hidden" role="status" aria-live="polite">
                    <span id="f7ReportsFocusLabel"></span>
                    <button type="button" id="f7ReportsClearFocus" class="ghost small">Back to recent reports</button>
                  </div>
                  <p id="f7ReportsLoading" class="reports-loading muted small hidden">Loading reports…</p>
                  <p id="f7ReportsError" class="notice warning hidden" role="alert"></p>
                  <p id="f7ReportsEmpty" class="reports-empty muted small hidden">No F7 reports yet.</p>
                  <ol id="f7ReportsList" class="reports-items" aria-live="polite"></ol>
                </aside>
                <article class="reports-detail" aria-live="polite">
                  <div id="f7ReportPlaceholder" class="reports-placeholder">
                    Select a report to review the details.
                  </div>
                  <div id="f7ReportDetail" class="reports-detail-card hidden">
                    <header class="reports-detail-head">
                      <h4 id="f7ReportDetailTitle">Report details</h4>
                      <time id="f7ReportDetailTime" class="muted small"></time>
                    </header>
                    <dl class="reports-meta">
                      <div class="reports-meta-item">
                        <dt>Target</dt>
                        <dd id="f7ReportTarget"></dd>
                      </div>
                      <div class="reports-meta-item">
                        <dt>Reported by</dt>
                        <dd id="f7ReportReporter"></dd>
                      </div>
                      <div class="reports-meta-item">
                        <dt>Reason</dt>
                        <dd id="f7ReportCategory"></dd>
                      </div>
                      <div class="reports-meta-item">
                        <dt>Report ID</dt>
                        <dd id="f7ReportId"></dd>
                      </div>
                    </dl>
                    <section id="f7ReportTargetSummary" class="reports-summary hidden" aria-live="polite">
                      <h5>Player summary</h5>
                      <dl class="reports-summary-grid">
                        <div>
                          <dt>Total reports</dt>
                          <dd id="f7ReportSummaryTotal">—</dd>
                        </div>
                        <div>
                          <dt id="f7ReportSummaryRecentLabel">Reports this week</dt>
                          <dd id="f7ReportSummaryRecent">—</dd>
                        </div>
                        <div>
                          <dt>Unique reporters</dt>
                          <dd id="f7ReportSummaryReporters">—</dd>
                        </div>
                        <div>
                          <dt>First report</dt>
                          <dd id="f7ReportSummaryFirst">—</dd>
                        </div>
                        <div>
                          <dt>Latest report</dt>
                          <dd id="f7ReportSummaryLast">—</dd>
                        </div>
                      </dl>
                      <div id="f7ReportSummaryCategories" class="reports-summary-tags" aria-live="polite"></div>
                    </section>
                    <section id="f7ReportTargetProfile" class="reports-profile hidden" aria-live="polite">
                      <div class="reports-profile-header">
                        <div id="f7ReportProfileAvatar" class="reports-profile-avatar" aria-hidden="true"></div>
                        <div class="reports-profile-meta">
                          <strong id="f7ReportProfileName">—</strong>
                          <p id="f7ReportProfileSteam" class="muted small">—</p>
                        </div>
                      </div>
                      <dl class="reports-summary-grid">
                        <div>
                          <dt>Country</dt>
                          <dd id="f7ReportProfileCountry">—</dd>
                        </div>
                        <div>
                          <dt>VAC status</dt>
                          <dd id="f7ReportProfileVac">—</dd>
                        </div>
                        <div>
                          <dt>Game bans</dt>
                          <dd id="f7ReportProfileGameBans">—</dd>
                        </div>
                        <div>
                          <dt>Last ban</dt>
                          <dd id="f7ReportProfileLastBan">—</dd>
                        </div>
                        <div>
                          <dt>Rust playtime</dt>
                          <dd id="f7ReportProfilePlaytime">—</dd>
                        </div>
                      </dl>
                      <p id="f7ReportProfileStatus" class="muted small hidden" role="status"></p>
                      <div class="reports-actions profile-actions">
                        <button type="button" id="f7ReportOpenProfile" class="ghost small">Open full player profile</button>
                      </div>
                    </section>
                    <section class="reports-message">
                      <h5>Message</h5>
                      <p id="f7ReportMessage" class="reports-message-body muted"></p>
                    </section>
                    <section id="f7ReportHistory" class="reports-history hidden">
                      <h5>Previous reports for this player</h5>
                      <ul id="f7ReportHistoryList" class="reports-history-list"></ul>
                    </section>
                    <div class="reports-actions">
                      <button type="button" id="f7ReportShowAll" class="ghost small">View all reports for this player</button>
                    </div>
                  </div>
                </article>
              </div>
            </div>
          </section>

          <section id="workspaceViewAqTickets" class="workspace-view" data-view="aq-tickets" data-capability="view" aria-hidden="true">
            <div class="card aq-card">
              <div class="card-header">
                <div class="card-title-group">
                  <h3>AQ Tickets</h3>
                  <p class="muted small">Review Discord support tickets linked to this server.</p>
                </div>
                <p id="aqTicketsCount" class="muted small"></p>
              </div>
              <div class="aq-body">
                <aside class="aq-list" aria-label="AQ tickets">
                  <p id="aqTicketsLoading" class="muted small hidden">Loading tickets…</p>
                  <p id="aqTicketsError" class="notice warning hidden" role="alert"></p>
                  <p id="aqTicketsEmpty" class="muted small hidden">No tickets for this server yet.</p>
                  <ol id="aqTicketsList" class="aq-items" role="listbox" aria-label="AQ tickets"></ol>
                </aside>
                <section class="aq-detail" aria-live="polite">
                  <div id="aqTicketPlaceholder" class="muted small">Select a ticket to view the conversation.</div>
                  <div id="aqTicketDetail" class="aq-ticket hidden" aria-hidden="true">
                    <header class="aq-ticket-header">
                      <div class="aq-ticket-title">
                        <h4 id="aqTicketSubject">Ticket subject</h4>
                        <p id="aqTicketMeta" class="muted small"></p>
                      </div>
                      <span id="aqTicketNumber" class="aq-ticket-number"></span>
                    </header>
                    <div class="aq-ticket-actions">
                      <a id="aqTicketPreviewLink" class="aq-ticket-preview-link hidden" href="#" target="_blank" rel="noopener">
                        Open web preview
                      </a>
                    </div>
                    <div id="aqTicketDialogLoading" class="muted small hidden">Loading conversation…</div>
                    <p id="aqTicketDialogError" class="notice warning hidden" role="alert"></p>
                    <p id="aqTicketDialogEmpty" class="muted small hidden">No messages in this ticket yet.</p>
                    <ol id="aqTicketDialog" class="aq-dialog" aria-live="polite"></ol>
                    <div id="aqTicketReply" class="aq-ticket-reply hidden">
                      <form id="aqTicketReplyForm" class="aq-ticket-reply-form" autocomplete="off">
                        <label class="sr-only" for="aqTicketReplyInput">Reply to ticket</label>
                        <textarea id="aqTicketReplyInput" name="message" rows="3" placeholder="Write a reply…"></textarea>
                        <p id="aqTicketReplyNotice" class="muted small hidden"></p>
                        <p id="aqTicketReplyError" class="notice error hidden" role="alert"></p>
                        <div class="aq-ticket-reply-actions">
                          <button type="submit" id="aqTicketReplySubmit" class="accent">Send reply</button>
                        </div>
                      </form>
                    </div>
                  </div>
                </section>
              </div>
            </div>
          </section>

          <section id="workspaceViewChat" class="workspace-view" data-view="chat" data-capability="console" aria-hidden="true">
            <div class="card chat-card">
              <div class="card-header">
                <h3>Chat</h3>
                <div class="card-controls chat-filter" role="group" aria-label="Chat scope">
                  <button type="button" class="chat-filter-btn active" data-channel="all" aria-pressed="true">All</button>
                  <button type="button" class="chat-filter-btn" data-channel="global" aria-pressed="false">Global</button>
                  <button type="button" class="chat-filter-btn" data-channel="team" aria-pressed="false">Team</button>
                </div>
              </div>
              <div class="chat-body" id="workspaceChatBody">
                <p id="workspaceChatLoading" class="chat-loading hidden">Loading chat…</p>
                <p id="workspaceChatEmpty" class="chat-empty-state">Select a server to view chat.</p>
                <p id="workspaceChatNotice" class="notice small hidden" role="alert"></p>
                <ol id="workspaceChatList" class="chat-list" aria-live="polite" aria-relevant="additions"></ol>
              </div>
            </div>
          </section>

          <section id="workspaceViewKills" class="workspace-view" data-view="kills" data-capability="console" aria-hidden="true">
            <div class="card kill-feed-card">
              <div class="card-header">
                <div>
                  <h3>Kill Feed</h3>
                  <p class="muted small">Player kills from the last 24 hours. NPC deaths are ignored.</p>
                </div>
              </div>
              <div class="kill-feed-body" id="killFeedBody">
                <p id="killFeedLoading" class="kill-feed-loading hidden">Loading kill feed…</p>
                <p id="killFeedEmpty" class="kill-feed-empty">Select a server to view the kill feed.</p>
                <p id="killFeedNotice" class="notice small hidden" role="alert"></p>
                <ol id="killFeedList" class="kill-feed-list" aria-live="polite" aria-relevant="additions"></ol>
              </div>
            </div>
          </section>

          <section id="workspaceViewConsole" class="workspace-view" data-view="console" data-capability="console" aria-hidden="true">
            <div class="card console-card">
              <div class="card-header">
                <h3>Console</h3>
                <div class="card-controls">
                  <button id="btnClearConsole" class="icon" title="Clear console">✕</button>
                </div>
              </div>
              <pre id="console"></pre>
              <div class="row">
                <input id="cmd" placeholder="say &quot;Hello&quot; | status | kick &lt;steamid&gt; reason">
                <button id="btnSend" class="accent">Send</button>
              </div>
              <div class="row quick-row" id="quickCommands"></div>
            </div>
          </section>

          <section id="workspaceViewDashboard" class="workspace-view" data-view="dashboard" data-capability="view" aria-hidden="true">
            <div class="workspace-summary">
              <div class="summary-card">
                <span class="summary-label">Players</span>
                <strong id="workspacePlayers">--</strong>
              </div>
              <div class="summary-card">
                <span class="summary-label">Queue</span>
                <strong id="workspaceQueue">--</strong>
              </div>
              <div class="summary-card">
                <span class="summary-label">Joining</span>
                <strong id="workspaceJoining">--</strong>
              </div>
            </div>

            <div class="card info-card">
              <div class="card-header">
                <h3>Server Overview</h3>
              </div>
              <div class="info-grid">
                <div class="info-item">
                  <span class="label">Players</span>
                  <span class="value" id="workspaceInfoPlayers">—</span>
                </div>
                <div class="info-item">
                  <span class="label">Max players</span>
                  <span class="value" id="workspaceInfoMaxPlayers">—</span>
                </div>
                <div class="info-item">
                  <span class="label">Queue</span>
                  <span class="value" id="workspaceInfoQueue">—</span>
                </div>
                <div class="info-item">
                  <span class="label">Joining</span>
                  <span class="value" id="workspaceInfoJoining">—</span>
                </div>
                <div class="info-item">
                  <span class="label">Game time</span>
                  <span class="value" id="workspaceInfoGameTime">—</span>
                </div>
                <div class="info-item">
                  <span class="label">Uptime</span>
                  <span class="value" id="workspaceInfoUptime">—</span>
                </div>
                <div class="info-item">
                  <span class="label">Framerate</span>
                  <span class="value" id="workspaceInfoFramerate">—</span>
                </div>
                <div class="info-item">
                  <span class="label">Network in</span>
                  <span class="value" id="workspaceInfoNetworkIn">—</span>
                </div>
                <div class="info-item">
                  <span class="label">Network out</span>
                  <span class="value" id="workspaceInfoNetworkOut">—</span>
                </div>
                <div class="info-item">
                  <span class="label">Last save</span>
                  <span class="value" id="workspaceInfoSaveCreatedTime">—</span>
                </div>
              </div>
            </div>
          </section>
        </div>

        <div id="moduleFallback" class="module-stack hidden" aria-hidden="true"></div>
      </section>

      <section id="settingsPanel" class="hidden settings-panel">
        <div class="profile-grid">
          <div class="profile-card">
            <div class="profile-card-head">
              <h3>Profile Information</h3>
              <p class="muted small">Manage your personal details.</p>
            </div>
            <div class="profile-card-body">
              <div class="profile-field">
                <span class="label">Username</span>
                <span id="profileUsername" class="value muted">—</span>
              </div>
              <div class="profile-field">
                <span class="label">Role</span>
                <span id="profileRole" class="value muted">—</span>
              </div>
            </div>
          </div>

          <div class="profile-card">
            <div class="profile-card-head">
              <h3>RustMaps Integration</h3>
              <p class="muted small">Paste your API key to enable live map rendering.</p>
            </div>
            <div class="profile-card-body">
              <label>RustMaps API key
                <input id="rustMapsKey" placeholder="pk_live_..." autocomplete="off">
              </label>
              <div class="row">
                <button id="btnSaveSettings" class="accent">Save settings</button>
              </div>
              <p id="settingsStatus" class="notice hidden"></p>
            </div>
          </div>

          <div class="profile-card">
            <div class="profile-card-head">
              <h3>Change Password</h3>
              <p class="muted small">Update your password regularly to keep access secure.</p>
            </div>
            <div class="profile-card-body">
              <label>Current Password
                <input type="password" id="currentPassword" placeholder="Enter current password" autocomplete="current-password">
              </label>
              <label>New Password
                <input type="password" id="newPassword" placeholder="Minimum 8 characters" autocomplete="new-password">
              </label>
              <label>Confirm Password
                <input type="password" id="confirmPassword" placeholder="Repeat new password" autocomplete="new-password">
              </label>
              <div class="row">
                <button id="btnChangePassword" class="accent">Update password</button>
              </div>
              <p id="passwordStatus" class="notice hidden"></p>
            </div>
          </div>

          <div class="profile-card">
            <div class="profile-card-head">
              <h3>Two-Factor Authentication</h3>
              <p class="muted small">Add an extra layer of security to your account.</p>
            </div>
            <div class="profile-card-body">
              <div class="profile-field">
                <span class="label">2FA Status</span>
                <span class="value muted">Disabled</span>
              </div>
              <button class="ghost" disabled>Enable 2FA</button>
              <p class="muted small">Coming soon.</p>
            </div>
          </div>
        </div>
      </section>
    </section>
  </div>

  <script src="assets/modules/module-loader.js"></script>
  <script src="assets/modules/players-graph.js"></script>
  <script src="assets/modules/live-players.js"></script>
  <script src="assets/modules/players.js"></script>
  <script src="assets/modules/map.js"></script>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js" crossorigin="anonymous"></script>
  <script src="assets/js/server-settings.js"></script>
  <script src="assets/app.js"></script>
</body>
</html>
